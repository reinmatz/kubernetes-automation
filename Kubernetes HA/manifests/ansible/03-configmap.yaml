---
# ConfigMap - Ansible Configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: ansible-config
  namespace: ansible
  labels:
    app: ansible
data:
  ansible.cfg: |
    [defaults]
    host_key_checking = False
    remote_user = root
    gathering = smart
    fact_caching = jsonfile
    fact_caching_connection = /tmp/ansible_facts
    fact_caching_timeout = 3600
    retry_files_enabled = False
    stdout_callback = default
    bin_ansible_callbacks = True

    [ssh_connection]
    ssh_args = -o ControlMaster=auto -o ControlPersist=60s
    pipelining = True

    [inventory]
    enable_plugins = host_list, yaml, ini

  requirements.yml: |
    ---
    collections:
      - name: kubernetes.core
        version: ">=3.0.0"
      - name: community.general
        version: ">=5.0.0"
      - name: ansible.posix
        version: ">=1.4.0"
